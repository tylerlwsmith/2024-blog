{{- define "main" }}
  {{- $tagIdMap := index .Data "tagIdMap" }}
  {{- $user := index .Data "user" }}


  <div class="spacer"></div>

  <div class="container">
    {{- with index .Data "post" }}
      <h1 class="page-title">{{ .Title.Rendered }}</h1>

      <time datetime="{{ .Date.Format "2006-01-02" }}" class="post-date">
        {{ .Date.Format "January 2, 2006" }}
      </time>

      <div class="post-body">
        {{ .Content.Rendered }}
      </div>

      {{- if len .Tags }}
        <dl class="tag-dl">
          <dt class="sr-only">Tags</dt>
          {{- range .Tags }}
            {{ with (index $tagIdMap .) }}
              <dd class="tag-dd">
                <a href="/tags/{{ .Slug }}" class="tag">
                  {{ .Name }}
                </a>
              </dd>
            {{- end }}
          {{- end }}
        </dl>
      {{- end }}

      {{- if $user.CanEditPost . }}
        <div class="edit-button-wrapper">
          <a
            href="/wp/wp-admin/post.php?post={{ .Id }}&action=edit"
            class="edit-button"
          >
            Edit Post &rarr;
          </a>
        </div>
      {{- end }}

    {{- end }}
  </div>

  <div class="spacer"></div>
{{- end }}
