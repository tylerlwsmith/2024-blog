{{- define "main" }}
  {{- $tagIdMap := index .Data "tagIdMap" }}


  <div class="container">
    <h1>Posts</h1>
    <ul class="post-list">
      {{- range (index .Data "posts") }}
        <li class="post-list-item">
          <div class="post-list-item__link-wrapper">
            <a href="/posts/{{ .Slug }}" class="post-list-item__link">
              {{ .Title.Rendered }}
            </a>
          </div>
          <time
            class="post-list-item__date"
            datetime="{{ .Date.Format "2006-01-02" }}"
          >
            {{ .Date.Format "January 2, 2006" }}
          </time>
          {{- if len .Tags }}
            <dl class="post-list-item__tag-dl">
              <dt class="sr-only">Tags</dt>
              {{- range .Tags }}
                {{ with (index $tagIdMap .) }}
                  <dd class="post-list-item__tag-dd">
                    <a
                      href="/tags/{{ .Slug }}"
                      class="post-list-item__tag-link"
                    >
                      {{ .Name }}
                    </a>
                  </dd>
                {{- end }}
              {{- end }}
            </dl>
          {{- end }}
        </li>
      {{- end }}
    </ul>

    <h2>Tags</h2>
    <ul>
      {{- range (index .Data "tags") }}
        <li>
          <a href="/tags/{{ .Slug }}">
            {{ .Name }}
            ({{ .Count }})
          </a>
        </li>
      {{- end }}
    </ul>
  </div>
{{- end }}
