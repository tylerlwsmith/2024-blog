{{ define "main" }}
  {{ template "_header.tmpl" . }}
  {{ $tagIdMap := index .Data "tagIdMap" }}


  <h1>Posts</h1>
  <ul>
    {{ range (index .Data "posts") }}
      <li>
        <a href="/posts/{{ .Slug }}">
          {{ .Title.Rendered }}
        </a>
        <time datetime="{{ .Date.Format "2006-01-02" }}">
          {{ .Date.Format "January 2, 2006" }}
        </time>
        {{ if len .Tags }}
          <div>
            {{ range .Tags }}
              {{ $tag :=  (index $tagIdMap .) }}
              <a href="/tags/{{ $tag.Slug }}">
                {{ $tag.Name }}
              </a>
            {{ end }}
          </div>
        {{ end }}
      </li>
    {{ end }}
  </ul>

  <h2>Tags</h2>
  <ul>
    {{ range (index .Data "tags") }}
      <li>
        <a href="/tags/{{ .Slug }}">
          {{ .Name }}
          ({{ .Count }})
        </a>
      </li>
    {{ end }}
  </ul>

  {{ template "_footer.tmpl" . }}
{{ end }}
